(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1381],{6479:function(e,t,r){"use strict";r.r(t);var n=r(7437);r(3233),r(9986),r(3003),r(7130),r(1526);var i=r(2265);t.default=function(e){let{onModelsLoaded:t}=e;return(0,i.useEffect)(()=>{let e=document.getElementById("Alvea"),r=()=>{t()};return e?e.addEventListener("model-loaded",r):console.error("No se encontr\xf3 la entidad con el ID: Alvea"),()=>{e&&e.removeEventListener("model-loaded",r)}},[]),(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("a-scene",{"hdri-environment":"path: /img/equirectangular/rogland_clear_night_4k.hdr",id:"iframe-id","loading-screen":"enabled: false;",children:[(0,n.jsx)("a-light",{id:"main-light",color:"#bf9b9b",type:"ambient",intensity:"1"}),(0,n.jsx)("a-light",{color:"#bf9b9b",type:"point",intensity:"1",position:"0 10 -9"}),(0,n.jsxs)("a-entity",{id:"rig",position:"0 0 0","movement-controls":"controls: gamepad,keyboard,nipple; constrainToNavMesh: true","nipple-controls":"mode: static; lookJoystickEnabled: false; moveJoystickEnabled:true; moveJoystickPosition: right",children:[(0,n.jsx)("a-entity",{id:"player",position:"0 1.6 0",camera:!0,"look-controls":!0}),(0,n.jsx)("a-entity",{raycaster:"objects: [data-raycastable]; interval: 500",cursor:"rayOrigin: mouse"})]}),(0,n.jsx)("a-entity",{rotation:"0 180 0",children:(0,n.jsx)("a-entity",{id:"Alvea","gltf-model":"/models/Palacio.glb",position:"10.3 0 7.9",scale:"1 1 1"})})]})})}},3003:function(){AFRAME.registerComponent("followcamera",{init:function(){this.cameraEl=document.querySelector("[camera]"),this.offset=new THREE.Vector3(-.5,.5,-3),this.speed=.02,this.stopDistance=.01,this.yMin=1.5,this.yMax=3,this.circleCenter=new THREE.Vector3(0,0,-9),this.radius=5},tick:function(e,t){if(this.cameraEl){var r=this.cameraEl.object3D,n=this.el.object3D,i=new THREE.Vector3;r.getWorldPosition(i);var o=i.clone().add(this.offset.clone().applyQuaternion(r.quaternion)),a=n.position;if(o.distanceTo(a)>this.stopDistance){var s=o.clone().sub(a).normalize();a.addScaledVector(s,this.speed*t/16)}var c=a.x-this.circleCenter.x,l=a.z-this.circleCenter.z,u=Math.sqrt(c*c+l*l);if(u>this.radius){var d=this.radius/u;a.x=this.circleCenter.x+c*d,a.z=this.circleCenter.z+l*d}a.y<this.yMin?a.y=this.yMin:a.y>this.yMax&&(a.y=this.yMax),n.quaternion.copy(r.quaternion)}}})},1526:function(e,t,r){"use strict";var n=r(3257),i=r(3086);AFRAME.registerComponent("exr-background",{init:function(){let e=this.el.sceneEl,t=e.renderer,r=e.object3D;new n.I().load("/img/equirectangular/evening_field_2k.exr",function(e){e.mapping=THREE.EquirectangularReflectionMapping,r.environment=e,r.background=e,t.outputEncoding=THREE.sRGBEncoding,t.toneMapping=THREE.ACESFilmicToneMapping,t.toneMappingExposure=.5})}}),AFRAME.registerComponent("responsive-size",{schema:{maxSize:{type:"number",default:2}},init:function(){let e=this.el;e.addEventListener("materialtextureloaded",()=>{let t,r;let n=e.getObject3D("mesh");if(!n||!n.material||!n.material.map||!n.material.map.image)return;let i=n.material.map.image,o=this.data.maxSize,a=i.width/i.height;a>1?(t=o,r=o/a):(r=o,t=o*a),e.setAttribute("width",t),e.setAttribute("height",r)})}}),AFRAME.registerComponent("hdri-environment",{schema:{path:{type:"string",default:""}},init:function(){if(!this.data.path){console.error('El atributo "path" es necesario para el componente hdri-environment.');return}let e=this.el.sceneEl,t=e.renderer;if(!t){console.error("No se encontr\xf3 el renderizador de THREE.js. Aseg\xfarate de que A-Frame est\xe1 inicializado correctamente.");return}let r=new THREE.PMREMGenerator(t);new i.x().load(this.data.path,t=>{let n=r.fromEquirectangular(t).texture;t.dispose();let i=e.object3D;i.environment=n,i.background=n},void 0,e=>{console.error("Error al cargar la textura HDRI:",e)})}})},7130:function(){var e,t=AFRAME.utils.debug,r=AFRAME.utils.coordinates,n=t("components:look-at:warn"),i=r.isCoordinates||r.isCoordinate;delete AFRAME.components["look-at"],AFRAME.registerComponent("look-at",{schema:{default:"0 0 0",parse:function(e){return i(e)||"object"==typeof e?r.parse(e):e},stringify:function(e){return"object"==typeof e?r.stringify(e):e}},init:function(){this.target3D=null,this.vector=new THREE.Vector3,this.cameraListener=AFRAME.utils.bind(this.cameraListener,this),this.el.addEventListener("componentinitialized",this.cameraListener),this.el.addEventListener("componentremoved",this.cameraListener)},update:function(){var e,t=this,r=t.data;if(!r||"object"==typeof r&&!Object.keys(r).length)return t.remove();if("object"==typeof r)return this.lookAt(new THREE.Vector3(r.x,r.y,r.z)),this.endTracking();if(!(e=t.el.sceneEl.querySelector(r))){n('"'+r+'" does not point to a valid entity to look-at');return}return e.hasLoaded?t.beginTracking(e):e.addEventListener("loaded",function(){t.beginTracking(e)})},tick:(e=new THREE.Vector3,function(t){var r=this.target3D;r&&(r.getWorldPosition(e),this.lookAt(e))}),remove:function(){this.el.removeEventListener("componentinitialized",this.cameraListener),this.el.removeEventListener("componentremoved",this.cameraListener)},beginTracking:function(e){this.target3D=e.object3D},endTracking:function(){this.target3D=null},cameraListener:function(e){e.detail&&"camera"===e.detail.name&&this.update()},lookAt:function(e){var t=this.vector,r=this.el.object3D;this.el.getObject3D("camera")?t.subVectors(r.position,e).add(r.position):t.copy(e),r.lookAt(t)}})},5566:function(e){var t,r,n,i=e.exports={};function o(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c=[],l=!1,u=-1;function d(){l&&n&&(l=!1,n.length?c=n.concat(c):u=-1,c.length&&h())}function h(){if(!l){var e=s(d);l=!0;for(var t=c.length;t;){for(n=c,c=[];++u<t;)n&&n[u].run();u=-1,t=c.length}n=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new m(e,t)),1!==c.length||l||s(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw Error("process.chdir is not supported")},i.umask=function(){return 0}},3086:function(e,t,r){"use strict";r.d(t,{x:function(){return o}});var n=r(2079);class i extends n.yxD{constructor(e){super(e),this.type=n.cLu}parse(e){let t,r,i;let o=function(e,t){switch(e){case 1:throw Error("THREE.HDRLoader: Read Error: "+(t||""));case 2:throw Error("THREE.HDRLoader: Write Error: "+(t||""));case 3:throw Error("THREE.HDRLoader: Bad File Format: "+(t||""));default:throw Error("THREE.HDRLoader: Memory Error: "+(t||""))}},a=function(e,t,r){t=t||1024;let n=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(i=s.indexOf("\n"))&&o<t&&n<e.byteLength;)a+=s,o+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return -1<i&&(!1!==r&&(e.pos+=o+i+1),a+s.slice(0,i))},s=new Uint8Array(e);s.pos=0;let c=function(e){let t,r;let n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,c=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,l={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for(!(e.pos>=e.byteLength)&&(t=a(e))||o(1,"no header found"),(r=t.match(/^#\?(\S+)/))||o(3,"bad initial token"),l.valid|=1,l.programtype=r[1],l.string+=t+"\n";!1!==(t=a(e));){if(l.string+=t+"\n","#"===t.charAt(0)){l.comments+=t+"\n";continue}if((r=t.match(n))&&(l.gamma=parseFloat(r[1])),(r=t.match(i))&&(l.exposure=parseFloat(r[1])),(r=t.match(s))&&(l.valid|=2,l.format=r[1]),(r=t.match(c))&&(l.valid|=4,l.height=parseInt(r[1],10),l.width=parseInt(r[2],10)),2&l.valid&&4&l.valid)break}return 2&l.valid||o(3,"missing format specifier"),4&l.valid||o(3,"missing image size specifier"),l}(s),l=c.width,u=c.height,d=function(e,t,r){if(t<8||t>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);t!==(e[2]<<8|e[3])&&o(3,"wrong scanline width");let n=new Uint8Array(4*t*r);n.length||o(4,"unable to allocate buffer space");let i=0,a=0,s=4*t,c=new Uint8Array(4),l=new Uint8Array(s),u=r;for(;u>0&&a<e.byteLength;){a+4>e.byteLength&&o(1),c[0]=e[a++],c[1]=e[a++],c[2]=e[a++],c[3]=e[a++],(2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=t)&&o(3,"bad rgbe scanline format");let r=0,d;for(;r<s&&a<e.byteLength;){let t=(d=e[a++])>128;if(t&&(d-=128),(0===d||r+d>s)&&o(3,"bad scanline data"),t){let t=e[a++];for(let e=0;e<d;e++)l[r++]=t}else l.set(e.subarray(a,a+d),r),r+=d,a+=d}for(let e=0;e<t;e++){let r=0;n[i]=l[e+r],r+=t,n[i+1]=l[e+r],r+=t,n[i+2]=l[e+r],r+=t,n[i+3]=l[e+r],i+=4}u--}return n}(s.subarray(s.pos),l,u);switch(this.type){case n.VzW:let h=new Float32Array(4*(i=d.length/4));for(let e=0;e<i;e++)!function(e,t,r,n){let i=Math.pow(2,e[t+3]-128)/255;r[n+0]=e[t+0]*i,r[n+1]=e[t+1]*i,r[n+2]=e[t+2]*i,r[n+3]=1}(d,4*e,h,4*e);t=h,r=n.VzW;break;case n.cLu:let m=new Uint16Array(4*(i=d.length/4));for(let e=0;e<i;e++)!function(e,t,r,i){let o=Math.pow(2,e[t+3]-128)/255;r[i+0]=n.A5E.toHalfFloat(Math.min(e[t+0]*o,65504)),r[i+1]=n.A5E.toHalfFloat(Math.min(e[t+1]*o,65504)),r[i+2]=n.A5E.toHalfFloat(Math.min(e[t+2]*o,65504)),r[i+3]=n.A5E.toHalfFloat(1)}(d,4*e,m,4*e);t=m,r=n.cLu;break;default:throw Error("THREE.HDRLoader: Unsupported type: "+this.type)}return{width:l,height:u,data:t,header:c.string,gamma:c.gamma,exposure:c.exposure,type:r}}setDataType(e){return this.type=e,this}load(e,t,r,i){return super.load(e,function(e,r){switch(e.type){case n.VzW:case n.cLu:e.colorSpace=n.GUF,e.minFilter=n.wem,e.magFilter=n.wem,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,i)}}class o extends i{constructor(e){console.warn("RGBELoader has been deprecated. Please use HDRLoader instead."),super(e)}}}}]);