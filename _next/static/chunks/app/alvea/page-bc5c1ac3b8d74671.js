(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6385],{3867:function(e,t,n){Promise.resolve().then(n.bind(n,2050))},2050:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(7437),a=n(166),o=n(2265),i=n(9873),s=n(3464),l=n(8856),c=n(2615),u=n(640),d=n.n(u),m=n(7625),h=n.n(m),f=n(9486);function p(e){let{action:t}=e;return(0,r.jsx)("button",{className:"fixed top-3 right-4 text-black text-lg hover:text-gray-500",onClick:t,children:(0,r.jsx)("b",{children:"âœ•"})})}var x=n(6556),g=e=>{let{isVisible:t,onOpen:n}=e,[a,i]=(0,o.useState)({firstname:"",lastname:"",email:""}),[u,m]=(0,o.useState)("");return(0,o.useEffect)(()=>{(async()=>{try{let e=(0,l.hP)();if(!e)throw Error("Access token no encontrado. Por favor, inicia sesi\xf3n.");let{firstname:t,lastname:n,email:r}=(await s.Z.get("".concat(c.p.DOMAIN_URL,"/users/me/"),{headers:{Authorization:"Bearer ".concat(e)}})).data;i({firstname:t,lastname:n,email:r}),m("")}catch(n){var e,t;m((null===(t=n.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.detail)||"Error al obtener los datos del usuario. Por favor, int\xe9ntelo m\xe1s tarde.")}})()},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{action:n,imgURL:"/img/icons/profile.svg",imgAlt:"Icono de usuario"}),t&&(0,r.jsx)(x.tw,{children:(0,r.jsxs)("div",{className:"".concat(d()["card-glass"]," mb-10 mt-10 text-center flex flex-col"),children:[(0,r.jsx)(p,{action:n}),(0,r.jsx)("h2",{className:"text-xl lg:text-2xl font-bold text-center",children:"Informaci\xf3n del Usuario"}),(0,r.jsx)("p",{children:"Nombre:"}),(0,r.jsx)("p",{className:"".concat(h()["input-rounded"]," justify-center"),children:a.firstname||"No disponible"}),(0,r.jsx)("p",{children:"Apellidos:"}),(0,r.jsx)("p",{className:"".concat(h()["input-rounded"]," justify-center"),children:a.lastname||"No disponible"}),(0,r.jsx)("p",{children:"Email:"}),(0,r.jsx)("p",{className:"".concat(h()["input-rounded"]," justify-center"),children:a.email||"No disponible"}),u&&(0,r.jsx)("p",{className:"text-red-500 font-bold",children:u})]})})]})},v=n(4744),j=()=>(0,r.jsx)(f.Z,{action:()=>{(0,l.ni)()},imgURL:"/img/icons/logout.svg",imgAlt:"Icono de cerrar sesi\xf3n"});function b(e){let{isVisible:t,onOpen:n}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{action:n,imgURL:"/img/icons/question.svg",imgAlt:"Icono de instrucciones"}),t&&(0,r.jsx)(x.tw,{children:(0,r.jsxs)("div",{className:"".concat(d()["card-glass"]," mb-10 mt-10"),children:[(0,r.jsx)(p,{action:n}),(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)("h2",{className:"text-xl lg:text-2xl font-bold text-center",children:"Instrucciones"}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsx)("img",{alt:"Teclas del teclado",className:"keys lg:h-16 h-12 w-auto"}),(0,r.jsx)("p",{children:"Mu\xe9vete en la Alvea presionando las teclas de las flechas o utilizando el joystick."})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsx)("img",{alt:"Arrastrar y soltar",className:"lg:h-16 h-12 w-auto"}),(0,r.jsx)("p",{children:"Haz clic sobre AlvyAI para empezar a grabar tu voz. La grabaci\xf3n se detendr\xe1 autom\xe1ticamente al detectar silencio, y recibir\xe1s una respuesta de la IA en forma de audio."})]}),(0,r.jsxs)("div",{className:"flex-col flex items-center text-center",children:[(0,r.jsx)("img",{alt:"Arrastrar y soltar",className:"lg:h-16 h-12 w-auto"}),(0,r.jsx)("p",{children:"Puedes mover la vista arrastrando el rat\xf3n en ordenador o deslizando lateralmente en m\xf3vil."})]})]})]})})]})}var _=n(7412);n(6560);var y=n(1448),N=n(3086);Object.freeze({FILE:"file",PRIMITIVE:"primitive"});class w{constructor({uid:e,name:t,field_type:n,value:r,media_type:a,file_name:o}){if(void 0===t)throw TypeError('Paramter "name" is required and has to be a String');if(void 0===n)throw TypeError('Paramter "field_type" is required and has to be a String');if(void 0===r)throw TypeError('Paramter "value" is required and has to be a String');this.uid=e,this.name=t,this.field_type=n,this.value=r,this.media_type=a||null,this.file_name=o||null}}class E{constructor({custom_values:e}){if(this.custom_values=[],void 0===e||!Array.isArray(e))throw TypeError('Parameter "custom_values" has to be an array');this.custom_values=e.map(e=>new w(e))}}async function I(){return new E(await fetch("".concat(c.p.DOMAIN_URL,"/personalization/"),{method:"GET",headers:{Authorization:"Bearer ".concat((0,l.hP)())}}).then(e=>e.json()).catch(()=>null))}async function S(e,t){let n="",r=new FormData;return r.append("name",e),t instanceof File?(r.append("field_type","file"),r.append("media_type",t.media_type),r.append("file_name",t.name),n+="upload/"):r.append("field_type","primitive"),r.append("value",t),await fetch("".concat(c.p.DOMAIN_URL,"/personalization/").concat(n),{method:"POST",body:r,headers:{Authorization:"Bearer ".concat((0,l.hP)())}}).then(e=>e.json()).catch(()=>null),null}async function A(e){return await fetch("".concat(c.p.DOMAIN_URL,"/personalization/").concat(e.uid,"/download/"),{method:"GET",headers:{Authorization:"Bearer ".concat((0,l.hP)())}}).then(e=>e.blob()).catch(()=>null)}var P=n(8516),k=e=>{let{isVisible:t,onOpen:n}=e,[a,i]=(0,o.useState)({}),[s,l]=(0,o.useState)(null);(0,o.useEffect)(()=>{(async()=>{try{let e=await I();if(e){let t=e.custom_values.reduce((e,t)=>(e[t.name]=t.value,e),{}),n=e.custom_values.find(e=>"profilePhoto"===e.name);if(n){let e=await A(n),r=await u(e);t.profilePhoto=r,l(r)}i(t);let r=()=>{let e=document.querySelector("#main-light"),n=document.querySelector("a-scene"),r=document.querySelector("#profileImg");e&&t.Luces&&v(t.Luces),n&&t.Entorno&&j(t.Entorno),r&&t.profilePhoto&&g(t.profilePhoto)},a=setInterval(()=>{document.querySelector("#main-light")&&document.querySelector("a-scene")&&document.querySelector("#profileImg")&&(r(),clearInterval(a))},1e3);return()=>clearInterval(a)}}catch(e){console.error("Error fetching preferences:",e)}})()},[]);let c=async(e,t)=>{try{await S(e,t),i(n=>({...n,[e]:t}))}catch(e){console.error("Error al guardar la preferencia:",e)}};async function u(e){return new Promise((t,n)=>{let r=new FileReader;r.onloadend=()=>{let n=r.result;if(e instanceof Blob){let t=e.type||"image/jpeg";n="data:".concat(t,";base64,").concat(n.split(",")[1])}t(n)},r.onerror=e=>n(e),r.readAsDataURL(e)})}let m=(e,t,n,r)=>{let a=r.currentTarget;"BUTTON"===a.tagName&&(document.getElementById("highlight").querySelectorAll("button").forEach(e=>{e.classList.remove("highlighted")}),a.classList.add("highlighted")),e(t),c(n,t)},g=e=>{let t=document.querySelector("a-scene"),n=document.querySelector("#profileImg");n&&n.remove();let r=document.createElement("a-image");r.setAttribute("src",e||(0,P.p)("img/profile-picture.svg")),r.setAttribute("responsive-size","maxSize: 2.1"),r.setAttribute("id","profileImg"),r.setAttribute("position","-10.9 2.23 -8.95"),r.setAttribute("rotation","0 90 0"),t?t.appendChild(r):console.error("No se encontr\xf3 el elemento 'a-scene' para a\xf1adir la imagen.")},v=e=>{let t=document.querySelector("#main-light");t&&t.setAttribute("light","color",e)},j=e=>{let t=document.querySelector("a-scene");if(!t)return;let n=t.object3D,r=t.renderer;if(!r)return;let a=new y.PMREMGenerator(r);a.compileEquirectangularShader(),new N.x().load(e,e=>{let t=a.fromEquirectangular(e).texture;e.dispose(),n.environment=t,n.background=t},void 0)},b=async e=>{let t=e.target.files[0];if(t)try{await S("profilePhoto",t);let e=await u(t);l(e),g(e),i(t=>({...t,profilePhoto:e}))}catch(e){console.error("Error al guardar la foto de perfil:",e)}},_=[{label:"Luces",buttons:[{className:"bg-pink-200 color-picker",value:"#bf9b9b"},{className:"bg-foundation-1 color-picker",value:"#7B1AD8"},{className:"bg-foundation-2 color-picker",value:"#E50085"},{className:"bg-white color-picker",value:"#FFFFFF"}],action:v},{label:"Entorno",buttons:[{className:"",value:(0,P.p)("/img/equirectangular/rogland_clear_night_4k.hdr"),text:"Noche"},{className:"",value:(0,P.p)("/img/equirectangular/sky-background-4.hdr"),text:"Mar y Monta\xf1as"}],action:j}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{action:n,imgURL:"/img/icons/custom.svg",imgAlt:"Icono de Personalizaci\xf3n"}),t&&(0,r.jsx)(x.tw,{children:(0,r.jsxs)("div",{className:"".concat(d()["card-glass"]," mb-10 mt-10"),children:[(0,r.jsx)("h2",{className:"text-xl lg:text-2xl font-bold text-center",children:"Personalizaci\xf3n"}),(0,r.jsx)(p,{action:n}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("p",{children:"Luces:"})}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("div",{id:"highlight",children:_[0].buttons.map((e,t)=>(0,r.jsx)("button",{className:"".concat(e.className," ").concat(a.Luces===e.value?"highlighted":""),onClick:t=>m(_[0].action,e.value,"Luces",t),children:e.text||null},t))})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("p",{children:"Entorno:"})}),(0,r.jsx)("select",{className:"".concat(h()["input-rounded"]," text-center"),value:a.Entorno||"",onChange:e=>{let t=e.target.value;j(t),c("Entorno",t)},children:_[1].buttons.map((e,t)=>(0,r.jsx)("option",{value:e.value,children:e.text||"Entorno ".concat(t+1)},t))}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("p",{children:"Foto de perfil:"})}),s?(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("img",{id:"profileImg",src:s,alt:"Foto de perfil",className:"lg:max-w-[200px] lg:max-h-[200px] max-h-[150px] max-w-[150px] w-auto h-auto"})}):(0,r.jsx)("p",{children:"No hay foto de perfil"}),(0,r.jsx)("button",{className:"".concat(h()["input-rounded"]," flex justify-center"),onClick:()=>document.getElementById("profilePhotoInput").click(),children:(0,r.jsx)("p",{children:"A\xf1adir foto de perfil"})}),(0,r.jsx)("input",{id:"profilePhotoInput",type:"file",accept:"image/*",style:{display:"none"},onChange:b})]})})]})},L=n(5850),R=n(119),B=n.n(R),z=e=>{let{setIsVisible:t}=e,[n,a]=(0,o.useState)(!1),[i,s]=(0,o.useState)(!0);return(0,r.jsx)("div",{onClick:()=>{i&&(s(!1),setTimeout(()=>s(!0),500),a(!n),t(e=>!e))},className:"bg-black lg:hover:bg-foundation-3 lg:p-2 p-1 rounded-full bg-opacity-55 cursor-pointer z-10",children:(0,r.jsx)("div",{className:"p-1",children:(0,r.jsx)("div",{className:"".concat(B().menuBtn," ").concat(n?B().open:""),children:(0,r.jsx)("div",{className:B().menuBtn__burger})})})})};let O=(0,a.default)(()=>Promise.all([n.e(4439),n.e(6882),n.e(5710),n.e(6339)]).then(n.bind(n,6339)),{loadableGenerated:{webpack:()=>[6339]},ssr:!1});function q(){(0,v.Z)();let[e,t]=(0,o.useState)(!0),[n,a]=(0,o.useState)(null),[s,l]=(0,o.useState)(!1),c=e=>{a(t=>t===e?null:e)};return(0,r.jsxs)(r.Fragment,{children:[e&&(0,r.jsx)(L.Z,{}),(0,r.jsx)(O,{onModelsLoaded:()=>{t(!1)}}),(0,r.jsx)("div",{className:"fixed top-4 right-4 z-[60]",children:(0,r.jsx)(z,{setIsVisible:l})}),(0,r.jsxs)("div",{className:" gap-2 lg:gap-4 grid grid-cols-2 fixed top-16 right-4 lg:top-20 z-50 lg:flex lg:flex-col\n  transition-opacity duration-1000 ease-in-out ".concat(s?"opacity-100 visible":"opacity-0 visible"),children:[(0,r.jsx)(g,{isVisible:"UserProfile"===n,onOpen:()=>c("UserProfile")}),(0,r.jsx)(k,{isVisible:"CustomModal"===n,onOpen:()=>c("CustomModal")}),(0,r.jsx)(b,{isVisible:"Instructions"===n,onOpen:()=>c("Instructions")}),(0,r.jsx)(_.VR,{}),(0,r.jsx)("div",{className:"col-span-2 justify-self-end",children:(0,r.jsx)(j,{})})]}),(0,r.jsx)(i.Z,{})]})}},6556:function(e,t,n){"use strict";n.d(t,{$j:function(){return s},hv:function(){return u},iz:function(){return l},tw:function(){return c}});var r=n(7437);n(2265);var a=n(1994),o=n(8163),i=n.n(o);function s(e){let{isVisible:t,className:n,...o}=e;return t?(0,r.jsx)("div",{className:(0,a.Z)(i().spinner,n),...o}):null}function l(){return(0,r.jsx)("div",{className:"w-4/5 mx-auto border-t-2 border-gray-700"})}function c(e){let{children:t,className:n,...o}=e;return(0,r.jsx)("div",{className:(0,a.Z)("fixed p-3 z-10 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 max-w-lg w-full min-w-[300px]",n),...o,children:t})}function u(e){let{children:t,className:n,...o}=e;return(0,r.jsx)("div",{className:(0,a.Z)("flex justify-center items-center min-h-screen",n),...o,children:t})}n(5925)},7412:function(e,t,n){"use strict";n.d(t,{VR:function(){return o}});var r=n(7437);n(2265);var a=n(9486);function o(){return(0,r.jsx)(a.Z,{action:()=>{let e=document.querySelector("a-scene");e&&e.enterVR()},imgURL:"/img/icons/vr-glasses.svg",imgAlt:"Icono de VR"})}},9486:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7437);function a(e){let{action:t,imgURL:n,imgAlt:a}=e;return(0,r.jsx)("div",{children:(0,r.jsx)("button",{onClick:t,className:"bg-black lg:hover:bg-foundation-3 rounded-full bg-opacity-50 lg:w-10 lg:h-10 w-8 h-8 rounded-full flex items-center",children:(0,r.jsx)("img",{src:n,alt:a,className:"p-2 lg:p-3"})})})}n(2265)},5850:function(e,t,n){"use strict";var r=n(7437);n(2265),n(3145);var a=n(3599),o=n.n(a);t.Z=()=>(0,r.jsx)("div",{className:o().container,children:(0,r.jsx)("div",{className:o().logoContainer,children:(0,r.jsx)("div",{className:o().waveOverlay})})})},9873:function(e,t,n){"use strict";var r=n(7437),a=n(2265);n(7037);var o=n(8516);t.Z=e=>{let{isMenuOpen:t}=e,[n,i]=(0,a.useState)(!1),s=(0,a.useRef)(null);return(0,a.useEffect)(()=>{s.current&&(s.current.loop=!0,s.current.volume=.3)},[]),(0,a.useEffect)(()=>{n?(console.log("Sonido activado"),s.current&&s.current.play()):(console.log("Sonido desactivado"),s.current&&(s.current.pause(),s.current.currentTime=0))},[n]),(0,r.jsxs)("div",{id:"bloque-sonido",onClick:()=>{i(e=>!e)},style:{opacity:t?0:1,transition:"opacity 0.3s ease",pointerEvents:t?"none":"auto"},children:[(0,r.jsx)("div",{id:"sonido",children:(0,r.jsx)("p",{children:"Sonido"})}),(0,r.jsxs)("div",{id:"cuadro",className:n?"activo":"inactivo",children:[(0,r.jsx)("div",{className:"barra"}),(0,r.jsx)("div",{className:"barra"}),(0,r.jsx)("div",{className:"barra"}),(0,r.jsx)("div",{className:"barra"})]}),(0,r.jsx)("audio",{ref:s,src:(0,o.p)("audio/Sea Waves - Sound Effect.mp3")})]})}},4744:function(e,t,n){"use strict";var r=n(2265),a=n(9376),o=n(8856),i=n(2615);t.Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/login",n=(0,a.useRouter)();(0,r.useEffect)(()=>{(async()=>{let r=(0,o.hP)();if(!r){t&&n.push(t);return}try{let a=await fetch("".concat(i.p.DOMAIN_URL,"/users/me/"),{method:"GET",headers:{Authorization:"Bearer ".concat(r)}});401===a.status||403===a.status?((0,o.j1)(""),t&&n.push(t)):e&&n.push(e)}catch(e){console.error("Error verifying token:",e),t&&n.push(t)}})()},[e,t,n])}},8856:function(e,t,n){"use strict";n.d(t,{hP:function(){return s},j1:function(){return i},ni:function(){return l},we:function(){return o},zB:function(){return a}});var r=n(2615);async function a(e,t){if(!e||!t)throw Error("No email or password.");let n=new FormData;n.append("email",e),n.append("password",t);let a="".concat(r.p.DOMAIN_URL,"/auth/login/");return(await fetch(a,{method:"POST",body:n}).then(e=>e.json()).catch(()=>({}))).access_token}async function o(e,t){if(!e||!t)throw Error("No uid or token.");let n=new FormData;n.append("uid",e),n.append("token",t);let a="".concat(r.p.DOMAIN_URL,"/auth/token/"),o=await fetch(a,{method:"POST",body:n}).then(e=>e.ok?e.json():null).catch(()=>null);if(null==o)throw Error("Bad credentials");return o}function i(e){window.localStorage&&window.localStorage.setItem("jwt",e)}function s(){return window.localStorage?window.localStorage.getItem("jwt"):""}function l(){localStorage.removeItem("refresh_token"),localStorage.removeItem("jwt"),window.location.href="/"}},2615:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var r=n(5566);let a={DOMAIN_WS:r.env.WEBSOCKET_URL,DOMAIN_URL:r.env.DOMAIN_URL,WEBAPP_URL:"/bienvenida/webapp"}},8516:function(e,t,n){"use strict";n.d(t,{p:function(){return r}});let r=e=>"".concat("/JaneStyle","/").concat(e).replace(/\/+/g,"/")},6560:function(){},7037:function(){},119:function(e){e.exports={menuBtn:"ButtonBurger_menuBtn__FvFrf",menuBtn__burger:"ButtonBurger_menuBtn__burger__mUeGM",open:"ButtonBurger_open__orLi5"}},3599:function(e){e.exports={container:"Loader_container__IKaco",logoContainer:"Loader_logoContainer__mp4Vc",logoWhite:"Loader_logoWhite__HV87R",logoColor:"Loader_logoColor__8OTrc",waveReveal:"Loader_waveReveal__y6laM"}},640:function(e){e.exports={"card-glass":"card-glass_card-glass__rYllw"}},5925:function(e){e.exports={dots:"dots_dots__XPrwp",l5:"dots_l5__zqJ6L"}},7625:function(e){e.exports={"input-rounded":"input-rounded_input-rounded__wPVC_"}},8163:function(e){e.exports={spinner:"spinner_spinner__RVr_o",l3:"spinner_l3__k4YcI"}}},function(e){e.O(0,[6937,1251,5921,6184,5336,4122,5870,6689,5878,7444,8582,2971,2117,1744],function(){return e(e.s=3867)}),_N_E=e.O()}]);